<ng-container *ngIf="pageReady">
<div class="cars-settings-container" *ngIf="!isAddCar">
  <table >
    <thead>
      <tr>
        <th>#</th>
        <th>Марка</th>
        <th>Модель</th>
        <th>Рік випуску</th>
        <th class="type">Тип Кузова</th>
        <th>Євро стандарт</th>
        <th>Дії</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let car of carList;let i = index">
        <td class="class-container" style="font-weight: 700;" scope="row">{{ i + 1 }}</td>
        <td class="class-container">{{ car.mark }}</td>
        <td class="class-container">{{ car.model }}</td>
        <td class="class-container">{{ car.year }}</td>
        <td class="class-container type">{{ car.type }}</td>
        <td class="class-container">{{ car.EURO }}</td>
        <td class="buttons-container" scope="col">
          <button (click)="updateCar(car)" type="button" class="edit-button">Редагувати</button>
          <button (click)="deleteCar(car.id)" type="button" class="delete-button">Видалити</button>
        </td>
      </tr>
    </tbody>
  </table>
  <button class="add-car" type="button" (click)="isAddCar = !isAddCar">Додати автомобіль</button>
</div>

<div class="container" *ngIf="isAddCar">
  <form [formGroup]="carSettingsForm" (ngSubmit)="editStatus ? saveCar() : addCar()">
    <label for="mark">Марка
      <input class="form-control" [ngClass]="{ 'is-invalid': submitted &&  validation.mark.errors }" formControlName="mark" id="mark" type="text">
    </label>
    <div *ngIf="submitted && validation.mark.errors" class="invalid">
      <div *ngIf="validation.mark.errors">Марка повинна містити тільки букви (мінімум 2)</div>
    </div>
    <label for="model">Модель
      <input class="form-control" [ngClass]="{ 'is-invalid': submitted &&  validation.model.errors }" formControlName="model" id="model" type="text">
    </label>
    <div *ngIf="submitted && validation.model.errors" class="invalid">
      <div *ngIf="validation.model.errors">Модель повинна містити букви,цифри або пробіли (мінімум 2)</div>
    </div>
    <label for="year">Рік випуску
      <input class="form-control" [ngClass]="{ 'is-invalid': submitted &&  validation.year.errors }" formControlName="year" id="year" type="text">
    </label>
    <div *ngIf="submitted && validation.year.errors" class="invalid">
      <div *ngIf="validation.year.errors">Вкажіть правильно рік</div>
    </div>
    <label for="type">Тип автомобіля
      <select class="form-control" [ngClass]="{ 'is-invalid': submitted &&  validation.type.errors }" formControlName="type" id="type" placeholder="Виберіть тип">
        <option value="Напівпричіп Тент">Напівпричіп Тент</option>
        <option value="Рефрижератор">Рефрижератор</option>
        <option value="Ізотерм">Ізотерм</option>
        <option value="Автопоїзд">Автопоїзд</option>
        <option value="Контейнеровіз">Контейнеровіз</option>
        <option value="Відкритий бортовий">Відкритий бортовий</option>
        <option value="Автоцистерна">Автоцистерна</option>
        <option value="Автовоз">Автовоз</option>
        <option value="Зерновоз">Зерновоз</option>
        <option value="Самоскид">Самоскид</option>
        <option value="Лісовоз">Лісовоз</option>
        <option value="Газель">Газель тент</option>
        <option value="Бортова Газель">Бортова Газель</option>
      </select>
    </label>
    <div *ngIf="submitted && validation.type.errors" class="invalid">
      <div *ngIf="validation.type.errors">Вкажіть тип автомобіля</div>
    </div>
    <label for="EURO">Євро стандарт
      <input class="form-control" [ngClass]="{ 'is-invalid': submitted &&  validation.EURO.errors }" formControlName="EURO" type="number" id="EURO">
    </label>
    <div *ngIf="submitted && validation.EURO.errors" class="invalid">
      <div *ngIf="validation.EURO.errors">Євростандарт повинен містити лише одну цифру</div>
    </div>
    <div class="crs-buttons">
      <button type="submit">{{ editStatus ? 'редагувати' : 'створити' }}</button>
      <button type="button" (click)="isAddCar = false">Скасувати</button>
    </div>
  </form>
</div>
<app-confirmation *ngIf="deleteCard" (action)="delete()"
(closeActionCard)="closeDeleteCard()" >
  <span title>Підтвердіть видалення</span>
  <span button>Видалити</span>
</app-confirmation>
</ng-container>
<app-load-page *ngIf="!pageReady"></app-load-page>


